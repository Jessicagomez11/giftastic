<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>GIFy HW</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/style.css">

</head>

<body>
    <div id="container">
        <nav class="navbar navbar-dark bg-dark" style="background-color: #e3f2fd;">
            <!-- Navbar content -->

           

            <div id="formDiv">

                <form id="form" class="form-inline my-2 my-lg-0">
                    <input id='whatUserSearched' class="form-control mr-sm-2" type="search" placeholder="Search"
                        aria-label="Search">
                    <button id='searchBtn' class="btn btn-outline-success my-2 my-sm-0" type="submit">Search
                        GIFY</button>
                </form>

            </div>
        </nav>
         <!-- buttonsDiv  will go here -->
         <div id='buttonsDiv' style="background-color: black;"></div>
         <br>
        <!-- gify resultsDiv will go here -->

        <div id='resultsDiv'></div>

    </div>







    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        // GLOBAL VARIABLES
        
        var topics = ['curious', 'suspicious', 'surprised', 'awkward', 'joyful', 'frustrated', 'persistant', 'sentimental'];
        var numberOfGifsDisplayed = 10;// might not want to make this dynamic
        var userInput;//this is used in the onclick function and in the query URL
       
        var searchBtnClicked = document.getElementById("searchBtn")

        
        
        //FUNCTION THAT WILL MAKE BUTTONS FOR THE ITEMS IN THE ARRAY
        
        function createTopicBtn(topic) {
            
            //creates buttons with each topic in the array
            var addingButtons = document.createElement('button')
            addingButtons.textContent = topic 

            //adding an attribute for the ajax call function
            $(addingButtons).attr("emo-data", topic)
            
            //adds the bootstrap class to the button
            $(addingButtons).addClass("btn btn-outline-primary")
            
            //append each item to buttonsDiv
            $('#buttonsDiv').append(addingButtons)
        }
        
        function makeButtons() {
            
            //forEach loop to create a button for each item in the array
            //uses the create topic button function to make buttons for the items that are already in the array
            topics.forEach(createTopicBtn)
        }
        
        
        
        
        //this function adds the user input into the topics array
        
        function addTotopicsArray() {
            //clears out the input
            $('#buttonsDiv').empty()

            //
            //if the user input's value = an empty string, dont add it to the array
            //


            //event listener
            searchBtnClicked.addEventListener('click', function (event) {
                
                //keeps the page from clearing out when it refreshes
                event.preventDefault()
                
                //what happens when the button is click?
                //take the user input 
                
                //takes the user input and make it a value attribute so that we can use the attribute to call it when we need it
                var userInput = $('#whatUserSearched').val();
                
                //adds it to the array
                topics.push(userInput)
                
                createTopicBtn(userInput)
                
                console.log(topics)
                //if the search button is pressed
            })
        }
        addTotopicsArray()
        
        makeButtons()
        
        function getAndDisplayResults() {
            //         //all buttons have a class of btn so when any of the buttons are clicked, we'll give it an attribute and get the value
            //         //all buttons should have an "emo-data" attribute added to them in  the for each loop
            var emotion = $(this).attr('emo-data')
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + emotion +
                "&api_key=dj24QtphGWzPDgZeL6xbGqreZAG2JVkg&limit=10";


            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response);
                console.log(response.data);

                var results = response.data;
                // TO - DO LIST.....
                //display it
                //(add it to the div)
        
            });
        }
           // Adding click event listeners to all elements with a class of "btn"
        $(document).on("click", ".btn", getAndDisplayResults);
        
        
    //     //NEEDS A FUNCTION THAT WILL MAKE THE AJAX CALL TO RETRIEVE THE DATA
    //     //THEN, IT NEEDS TO BE APPENDED TO THE RESULTSDIV
    //     function getAndDisplayResults(){ 

            
            
    //      
      
        </script>
</body>

</html>