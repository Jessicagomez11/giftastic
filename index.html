<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>GIFy HW</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/style.css">

</head>

<body>
    <div id="container">
        <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
            <!-- Navbar content -->

            <!-- buttonsDiv  will go here -->
            <div id='buttonsDiv'></div>
            <br>

            <div id="formDiv">

                <form id="form" class="form-inline my-2 my-lg-0">
                    <input id='whatUserSearched' class="form-control mr-sm-2" type="search" placeholder="Search"
                        aria-label="Search">
                    <button id='searchBtn' class="btn btn-outline-success my-2 my-sm-0" type="submit">Search
                        GIFY</button>
                </form>

            </div>
        </nav>
        <!-- gify resultsDiv will go here -->

        <div id='resultsDiv'></div>

    </div>







    <script src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script>
        // GLOBAL VARIABLES

        var topics = ['curious', 'suspicious', 'surprised', 'awkward', 'joyful', 'frustrated', 'persistant', 'sentimental'];
        var numberOfGifsDisplayed = 10;// might not want to make this dynamic
        var userInput;//this is used in the onclick function and in the query URL

        // var APIKey ='dj24QtphGWzPDgZeL6xbGqreZAG2JVkg'------------probs don't need this
        var queryURL = 'https://api.giphy.com/v1/gifs/search?api_key=dj24QtphGWzPDgZeL6xbGqreZAG2JVkg&q=' + userInput + '&limit=' + numberOfGifsDisplayed + '&offset=0&rating=G&lang=en'


        //NEEDS A FUNCTION THAT WILL MAKE BUTTONS FOR THE ITEMS IN THE ARRAY

        function createTopicBtn(topic) {
            var addingButtons = document.createElement('button')
            addingButtons.textContent = topic

            $(addingButtons).addClass("btn btn-outline-primary")

            //append each item to buttonsDiv?
            //(this) is the window
            $('#buttonsDiv').append(addingButtons)
        }

        function makeButtons() {
            //clear out
            // $('#buttonsDiv').empty()
            //for loop to create a button for each item ib the 
            topics.forEach(createTopicBtn)
        }


        // var bootstrapBtn = document.getElementById('button');
        //        bootstrapBtn.classList.add('btn btn-outline-secondary .btn-lg')

        //NEEDS A FUNCTION THAT WILL TAKE THE USERINPUT AND ADD IT TO THE ARRAY
        //WITHIN THIS FUNCTION: MAKE SURE TO CALL THE FIRST FUNCTION SO THAT THE NEW ITEMS GET BUTTONS

        function addTotopicsArray() {
            //clear out the input
            $('#buttonsDiv').empty()
            var searchBtnClicked = document.getElementById("searchBtn")
            searchBtnClicked.addEventListener('click', function (event) {

                console.log("1st this is " + this)
                event.preventDefault()

                //what happens when the button is click?
                //take the user input 
                console.log("this is" + this)
                var userInput = $('#whatUserSearched').val();

                //add it to the array
                topics.push(userInput)

                createTopicBtn(userInput)

                console.log(topics)
            })
        }


        addTotopicsArray()

        makeButtons()

        //NEEDS A FUNCTION THAT WILL MAKE THE AJAX CALL TO RETRIEVE THE DATA
        //THEN, IT NEEDS TO BE APPENDED TO THE RESULTSDIV
        function displayResults() {
            //this is where the ajax call will be made
            $.ajax({
                URL: queryURL,
                Method: 'GET'
            }).then(function (response) {
                console.log(response)
            })
            //console.log the response
            //call it 
            //display it
            //(add it to the div)

        }

    </script>
</body>

</html>